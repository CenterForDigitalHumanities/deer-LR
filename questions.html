<!DOCTYPE html>
<!--
    author: Bryan Haberberger <bryan.j.haberberger@slu.edu>
    -->
<html>

<head>
    <title>Lived Religions questionnaire encoder</title>
    <meta charset="UTF-8">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/mycss.css">

    <style>
        select[sub]{
            display: none;
        }
        .question{
            display:none;
        }
        .hidden{
            display: none;
        }
        input,textarea{
            display: block;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <!--Who is the person we are asking these questions to.  Should there be a person_simple custom template for this? -->
        <div>
            Please provide the information below to begin a survey.  
        </div>
        <div id="interviewee" class="hidden card interviewee">
            <div class="card-body">
                <header class="card-title">Inteviewee Information</header>
                <div id="interviewee_info">Loading interviewee data...</div>
            </div>
        </div>
        <div id="noInterviewee" class="card">
            <div class="card-body">
                <header class="card-title">No Inteviewee Provided</header>
                <label>Interviewee ID:</label><input id="interviewee_id" type="text" value="http://devstore.rerum.io/v1/id/5cdeb6a7e4b07d216aab6908">
            </div>
        </div>

        <div id="interviewer" class="hidden card interviewer">
            <div class="card-body">
                <header class="card-title">Inteviewer Information</header>
                <div id="interviewer_info" >Loading interviewer data...</div>
            </div>
        </div>
        <div id="noInterviewer" class="card">
            <div class="card-body">
                <header class="card-title">No Inteviewer Provided</header>
                <label>Interviewer ID:</label><input id="interviewer_id" type="text" value="">
            </div>
        </div>

        <!-- What EventID is the survey attached to.  Pull LocationID from that -->
         <div id="event" class="hidden card event">
            <div class="card-body">
                <header class="card-title">Event Information</header>
                <div id="event_info">Loading event data...</div>
            </div>
        </div>
        <div id="noEvent" class="card">
            <div class="card-body">
                <header class="card-title">No Event</header>
                <label>Event ID:</label><input id="event_id" type="text" value="">
            </div>
        </div> 
        <input class="btn btn-primary" onclick="LR.ui.startSurvey(event)" type="button" value="Begin">
        <!-- Questions should be one per line or perhaps something like card style -->
            <form id="theSurvey" my-type="Conversation" my-context="http://schema.org" survey_id="" class="container survey hidden">
                <input id="mata_about" class="convoMetadata" type="hidden" my-key="about" value="unknown">
                <input id="meta_author" class="convoMetadata" type="hidden" my-key="author" value="unknown">
                <input id="meta_contributor"class="convoMetadata" type="hidden" my-key="contributor" value="unknown">
                <input class="convoMetadata" type="hidden" my-key="inLanguage" value="en">
                <input id="meta_name" class="convoMetadata" type="hidden" my-key="name" value="Bryan Testing LR">
                <h3>Location</h3>
                <div class="QA">
                    <input class="question" type="text"  value="What is the name of this location?" />
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What is the address of this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you live near this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What are some of the places that surround this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Provide a description of this location in your own words."/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How does this location interact with the neighborhood."/>
                    <textarea class="answer"> </textarea>
                </div>
                <h3>History/Background</h3>
                <!-- <div class="card-text">Help describe the history of this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="What is the history of this location"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe others who affiliate/work at/attend/visit/patronize this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What would you like other people nearby to know about this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <h3>Space</h3>
                <!-- <div class="card-text">Help describe the space in this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe the physical and social space at this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe others who affiliate/work at/attend/visit/patronize this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What would you like other people nearby to know about this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What does this space mean to you?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Is there anything about the physical or social space of this location that a casual observer or first time visitor may not recognize?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How does the physical or social space relate to broader communities?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you think physical space matters to public understandings of religion?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <h3>Belief</h3>
                <!-- <div class="card-text">Help describe beliefs that relate to this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="Are there any guiding beliefs or creeds that you associate with this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Does this location have a stated mission?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How do these things relate to the people that affiliate/work/attend/patronize this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any unspoken beliefs that shape or motivate experiences at this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <h3>Practices</h3>
                <!-- <div class="card-text">Help describe some of the day to day goings on at this location</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="What is a typical schedule like at this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What are the events that occur here that best represent this community, if any at all?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any unofficial or vernacular practices you associate with this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any objects or images at this location that are important to you?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do any of these practices have an effect on, or are they affected by, your location in the city?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <h3>Wrap up</h3>
                <!-- <div class="card-text">Personal Questions</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe religion in St. Louis?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you feel relogion matters to people outside of specific faith communities?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you feel that religious ideas/beliefs/objects/attitudes/representations affect people living in St. Louis?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you have any other questions or comments about this location?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you have ideas about other people, places, or topics to explore as part of this study of relogion in St. Louis?"/>
                    <textarea class="answer"> </textarea>
                </div>
                <input type="submit" value="Save Changes" onclick="LR.ui.submitSurvey()" />
            </form>
        </div>

    <!-- Add ins -->
    <script src="./js/deerInitializer.js" type="module"></script>   
    <script src="./js/app.js" type="text/javascript"></script>  
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        //window.onhashchange = onload = () => hashExample.setAttribute("my-id", window.location.hash.substr(1))
        // document.onscroll = () => {
        //     badge.style.opacity = 1 - window.scrollY / window.innerHeight * 2
        //     tagline.style.top = window.scrollY / window.innerHeight * -5 + "em"
        // }

         document.onload = () => {
            LR.local.removeDirty() // everything starts off clean
            let surveyID = LR.tricks.getURLVariable(survey)
            if(surveyID){

            }


            let answerAreas = document.getElementsByClassName("answer")
            for(let e = 0; e<answerAreas.length; e++){
                let area = answerAreas[e]
                if (area.addEventListener) {
                  area.addEventListener('input', function() {
                    if(area.getAttribute("dirty") === "false"){
                         LR.local.makeDirty(area)   
                    }
                   
                  }, false)
                } else if (area.attachEvent) {
                  area.attachEvent('onpropertychange', function() {
                    if(area.getAttribute("dirty") === "false"){
                         LR.local.makeDirty(area)   
                    }
                  })
                }
            }
         }


    </script>
</body>

</html>