<!DOCTYPE html>
<!--
    author: Bryan Haberberger <bryan.j.haberberger@slu.edu>
    -->
<html>

<head>
    <title>Lived Religions questionnaire encoder</title>
    <meta charset="UTF-8">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/mycss.css">

    <style>
        select[sub]{
            display: none;
        }
        .question{
            display:none;
        }
        .hidden{
            display: none;
        }
        input,textarea{
            display: block;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <!--Who is the person we are asking these questions to.  Should there be a person_simple custom template for this? -->
        <div id="interviewee" class="hidden card interviewee">
            <div class="card-body">
                <header class="card-title">Inteviewee Information</header>
                <div id="iid" class="my-view" my-template="person" my-id="">Loading interviewee data...</div>
            </div>
        </div>
        <div id="noInterviewee" class="card">
            <div class="card-body">
                <header class="card-title">No Inteviewee Provided</header>
                <label>Interviewee ID:</label><input id="iid_val" type="text" value="http://devstore.rerum.io/v1/id/5cdeb6a7e4b07d216aab6908">
                <input class="btn btn-primary" onclick="loadUp(event)" type="button" value="Begin">
            </div>
        </div>

        <!-- What EventID is the survey attached to.  Pull LocationID from that -->
        <!-- <div id="interviewee" class="hidden card interviewee">
            <div class="card-body">
                <header class="card-title">Inteviewee Information</header>
                <div id="iid" class="my-view" my-template="person" my-id="">Loading interviewee data...</div>
            </div>
        </div>
        <div id="noInterviewee" class="card">
            <div class="card-body">
                <header class="card-title">No Inteviewee Provided</header>
                <label>Interviewee ID:</label><input id="iid_val" type="text" value="http://devstore.rerum.io/v1/id/5cdeb6a7e4b07d216aab6908">
                <input class="btn btn-primary" onclick="loadUp(event)" type="button" value="Begin">
            </div>
        </div> -->

        <!-- Questions should be one per line or perhaps something like card style -->
            <form my-type="Conversation" my-context="http://schema.org" survey-id="" class="container survey">
                <h3>Location</h3>
                <!-- <div> Describe the location this event occurred</div> -->
                <input type="hidden" my-key="creator" value="unknown">
                <input type="hidden" my-key="about" value="unknown">
                <input type="hidden" my-key="author" value="unknown">
                <input type="hidden" my-key="contributor" value="unknown">
                <input type="hidden" my-key="inLanguage" value="unknown">
                <input type="hidden" my-key="name" value="unknown">

                <!-- If the survey is distinct, then all of these are targeting the Survey.  A lot of these questions are about a Location. -->
                <div class="QA">
                    <input class="question" type="text"  value="What is the name of this location?" />
                    <input type="text" my-key="text" >
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What is the address of this location?"/>
                    <input type="text" my-key="IDK_0" >
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you live near this location?"/>
                    <input type="text" my-key="IDK_1" >
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What are some of the places that surround this location?"/>
                    <input type="text" my-key="IDK_2" >
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Provide a description of this location in your own words."/>
                    <textarea my-key="description" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How does this location interact with the neighborhood."/>
                    <textarea my-key="IDK_4" ></textarea>
                </div>
                <h3>History/Background</h3>
                <!-- <div class="card-text">Help describe the history of this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="What is the history of this location"/>
                    <textarea my-key="IDK_5" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe others who affiliate/work at/attend/visit/patronize this location?"/>
                    <textarea my-key="IDK_6" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What would you like other people nearby to know about this location?"/>
                    <textarea my-key="IDK_7" ></textarea>
                </div>
                <h3>Space</h3>
                <!-- <div class="card-text">Help describe the space in this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe the physical and social space at this location?"/>
                    <textarea my-key="IDK_8" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe others who affiliate/work at/attend/visit/patronize this location?"/>
                    <textarea my-key="IDK_09" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What would you like other people nearby to know about this location?"/>
                    <textarea my-key="IDK_10" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What does this space mean to you?"/>
                    <textarea my-key="IDK_11" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Is there anything about the physical or social space of this location that a casual observer or first time visitor may not recognize?"/>
                    <textarea my-key="IDK_12" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How does the physical or social space relate to broader communities?"/>
                    <textarea my-key="IDK_13" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you think physical space matters to public understandings of religion?"/>
                    <textarea my-key="IDK_14" ></textarea>
                </div>
                <h3>Belief</h3>
                <!-- <div class="card-text">Help describe beliefs that relate to this location.</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="Are there any guiding beliegs or creeds that you associate with this location?"/>
                    <textarea my-key="IDK_15" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Does this location have a stated mission?"/>
                    <textarea my-key="IDK_16" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="How do these things relate to the people that affiliate/work/attend/patronize this location?"/>
                    <textarea my-key="IDK_17" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any unspoken beliefs that shape or motivate experiences at this location?"/>
                    <textarea my-key="IDK_18" ></textarea>
                </div>
                <h3>Practices</h3>
                <!-- <div class="card-text">Help describe some of the day to day goings on at this location</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="What is a typical schedule like at this location?"/>
                    <textarea my-key="IDK_19" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="What are the events that occur here that best represent this community, if any at all?"/>
                    <textarea my-key="IDK_20" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any unofficial or vernacular practices you associate with this location?"/>
                    <textarea my-key="IDK_21" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Are there any objects or images at this location that are important to you?"/>
                    <textarea my-key="IDK_22" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do any of these practices have an effect on, or are they affected by, your location in the city?"/>
                    <textarea my-key="IDK_23" ></textarea>
                </div>
                <h3>Wrap up</h3>
                <!-- <div class="card-text">Personal Questions</div> -->
                <div class="QA">
                    <input class="question" type="text"  value="How would you describe religion in St. Louis?"/>
                    <textarea my-key="IDK_24" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you feel relogion matters to people outside of specific faith communities?"/>
                    <textarea my-key="IDK_25" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you feel that religious ideas/beliefs/objects/attitudes/representations affect people living in St. Louis?"/>
                    <textarea my-key="IDK_26" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you have any other questions or comments about this location?"/>
                    <textarea my-key="IDK_27" ></textarea>
                </div>
                <div class="QA">
                    <input class="question" type="text"  value="Do you have ideas about other people, places, or topics to explore as part of this study of relogion in St. Louis?"/>
                    <textarea my-key="IDK_28" ></textarea>
                </div>
                <input type="submit" value="Save Changes" onclick="survey()" />
            </form>
        </div>

    <!-- Add ins -->
    <script src="./js/deerInitializer.js" type="module"></script>   
    <script src="./js/app.js" type="text/javascript"></script>  
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        //window.onhashchange = onload = () => hashExample.setAttribute("my-id", window.location.hash.substr(1))
        // document.onscroll = () => {
        //     badge.style.opacity = 1 - window.scrollY / window.innerHeight * 2
        //     tagline.style.top = window.scrollY / window.innerHeight * -5 + "em"
        // }
        // document.onload = () => {

        // }

        function survey(){
            //Question
            //Is a schema.org JSON-LD Question and/or AskAction
            let conversations - {};
            conversations = gatherMetadataAboutConversation()
            let questions = makeTheQuestions(); //Or we don't have to track these individually, maybe solely existing in a Reply Action directly is good nuff.
            let answers = makeTheAnswers(); //Or we don't have to track these individually, maybe solely existing in a Reply Action directly is good nuff.
            let qaSet = makeReplyActionsFrom(questions, answers)
            conversations.hasPart = qaSet;
            
            let a={
              "id":"http://example.org/Question1",
              "@context": "https://schema.org",
              "@type":"Question",
              "text":"Do you feel having the event at the Vatican made any extra impact?",
              "about/isPartOf":"http://example.org/Event1",
              "contentLocation":"http://example.org/Location1", //Although the Event would know this, it may make querying easier
              "author/creator":"http://example.org/Person1", //Perhaps the interviewer
              "contributor":"http://example.org/Person2", //Perhaps the interviewee
              "editor":"Some other person",
              "inLanguage":"en"
            }

            //Answer
            //Is a schema.org JSON-LD Answer or ReplyAction
            let b = {
              "id":"http://example.org/Answer1",
              "@context": "https://schema.org",
              "@type":"Answer",
              "text":"Being able to connect with the artifacts was really important for my experience.",
              "parentItem":"http://example.org/Question1",
              "about/isPartOf":"http://example.org/Event1",
              "contentLocation":"http://example.org/Location1", //Although the Event would know this, it may make querying easier
              "author/creator":"http://example.org/Person2", 
              "contributor":"http://example.org/Person1", //Perhaps the interviewee
              "editor":"Some other person",
              "inLanguage":"en"
            }

            //ReplyAction :: Aggregation technique
            //Patrick replies to Bryan's question during a survey about Religion in Place at the Vatican
            let c={
              "id":"http://example.org/QA01",
              "@context": "https://schema.org",
              "@type": "ReplyAction",
              "agent": {
                "@type": "Person",
                "id": "http://example.org/Person1"
              },
              "recipient": {
                "@type": "Person",
                "id": "http://example.org/Person2"
              },
              "resultComment": {
                "@type":"Answer",
                "id":"http://example.org/Answer1",
                "parentItem":{
                   "@type":"Question",
                   "id":"http://example.org/Question1",
                   "text":"You can cheat and put the text content of the question here"
                }   
              },
              "text":"You can cheat and put the text content of the answer here"
            }

            //Is a Survey a https://schema.org/Conversation/ ?  I think that would be fair to say.  A conversation aggregates Comments like
            let d={
              "id":"http://example.org/Survey1",
              "@context": "https://schema.org/",
              "@type": "Conversation",
              "name": "Lived Religion First Event Survey",
               //Can I cheat and reference the people involved in Q/A without digging into 'hasPart' objs?
               //I am thinking of queries like "Give me conversations from Event1 involving Bryan"
              "hasPart/itemListElem":[ //If the conversation has all the metadata descriptors, then these can be super simple.  
                   "http://example.org/Question1",
                   "http://example.org/Answer1"
                          //OR
                   "http://example.org/AskAction1",
                   "http://example.org/ReplyAction1"
                        //OR MAYBE
                   "http://example.org/QA01",
                   "http://example.org/QA02"
              ],
              "about/isPartOf":"http://example.org/Event1",
              "contentLocation":"http://example.org/Location1",
              "author/creator":"http://example.org/Person1", //Perhaps the interviewer?
              "contributor":"http://example.org/Person2", //Perhaps the interviewee?
              "editor":"http://example.org/Person13321aee454",
              "inLanguage":"en"
            }



        }

        function loadUp(event){
            let id = document.getElementById("iid_val").value
            if(typeof id !== "string" || "" === id){
                return false
            }
            let questions = document.getElementsByClassName("question")
            for(let elem=0; elem<questions.length; elem++){
                questions[elem].style.display = "block"
            }
            document.getElementById("interviewee").classList.remove("hidden")
            document.getElementById("noInterviewee").classList.add("hidden")
            document.getElementById("iid").setAttribute("my-id", id)
            // let forms = document.querySelectorAll("form[my-type]")
            // for(let form =0; form<forms.length; form++){
            //     forms[form].setAttribute("my-id", id)
            // }
            // let targets = document.querySelectorAll("input[my-key='target']")
            // for(let target =0; target<targets.length; target++){
            //     targets[target].setAttribute("value", id)
            // }
        }
    </script>
</body>

</html>