<!DOCTYPE html>
<!--
    author: Bryan Haberberger <bryan.j.haberberger@slu.edu>
    -->
<html>

<head>
    <title>Lived Religions events</title>
    <meta charset="UTF-8">
    <!--     <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/chota@latest">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />
    <style>
        select[sub] {
            display: none;
        }
        
        #leafletPreview {
            height: 20rem;
        }
    </style>
</head>

<body>
    <lr-nav></lr-nav>

    <div class="container">
        <h2 class="text-primary">Create a New Location</h2>
        <div class="card bd-primary">
            <div class="card_body">
                <form id="newLocationForm" deer-type="Place" deer-context="http://schema.org">
                    <label>Location Label</label>
                    <input type="text" deer-key="name" deer-source="">

                    <input type="hidden" deer-key="creator" value="loading">
                    <input type="hidden" deer-key="additionalType" value="Feature">
                    <input type="hidden" deer-key="targetCollection" value="LivedReligionLocationsTest">

                    <h4>Map Information</h4>
                    <input type="hidden" deer-key="geometry" value="{}">
                    <div class="grouped">
                        <label>Latitude</label>
                        <input id="leafLat" step=".000000001" type="number" oninput="updateGeoJSON()">

                        <label>Longitude</label>
                        <input id="leafLong" step=".000000001" type="number" oninput="updateGeoJSON()">
                    </div>

                    <div id="leafletPreview"></div>

                    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
                    <script src="https://cdn.osmbuildings.org/classic/0.2.2b/OSMBuildings-Leaflet.js"></script>

                    <script>
                        var previewMap = L.map('leafletPreview').setView([38.628009, -90.201101], 16)
                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            maxZoom: 19,
                            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                        }).addTo(previewMap);
                        var osmb = new OSMBuildings(previewMap).load('https://{s}.data.osmbuildings.org/0.2/anonymous/tile/{z}/{x}/{y}.json')

                        function updateGeoJSON() {
                            let geometryInput = document.querySelector("input[deer-key='geometry']")
                            let lat = parseInt(leafLat.value * 1000000) / 1000000
                            let long = parseInt(leafLong.value * 1000000) / 1000000
                            if (lat && long) {
                                previewMap.setView([lat, long], 18)
                            }
                        }
                        previewMap.on('click', e => L.popup().setLatLng(e.latlng).setContent(`<div>${e.latlng.toString()}<br><button class="tag is-small text-primary bd-primary" onclick="leafLat.value=${parseInt(e.latlng.lat * 1000000) / 1000000};leafLong.value=${parseInt(e.latlng.lng * 1000000) / 1000000};">Use These</button></div>`).openOn(previewMap))
                    </script>

                    <label>Description</label>
                    <textarea deer-key="description"></textarea>
                    <div class="row">
                        <input class="button primary" type="submit">
                    </div class="row">

                    <div class="primarySpecification" for="spaces">
                        <header>What is the primary type of space this is?</header>
                        <label>General Specification</label>
                        <input type="radio" name="spaces" value="Accommodation" /><span class="chk_lbl">Accommodation</span>
                        <input type="radio" name="spaces" value="AdministrativeArea" /><span class="chk_lbl">Administrative Area</span>
                        <input type="radio" name="spaces" value="Civic Structure" /><span class="chk_lbl">Civic Structure</span>
                        <input type="radio" name="spaces" value="Landform" /><span class="chk_lbl">Landform</span>
                        <!--TODO: same properties as Place and Intangible in schema, but this is like LR::Imagined because no schema exists-->
                        <input type="radio" name="spaces" value="Imagined" /><span class="chk_lbl">Imagined</span>
                        <br>
                        <label>More Specific</label>
                        <input type="radio" name="spaces" value="Landmarks or Historical Buildings" /><span class="chk_lbl">Landmarks or Historical Buildings</span>
                        <input type="radio" name="spaces" value="Local Business" /><span class="chk_lbl">Local Business</span>
                        <input type="radio" name="spaces" value="Residence" name="Accomodation" /><span class="chk_lbl">Residence</span>
                        <input type="radio" name="spaces" value="School" /><span class="chk_lbl">School</span>
                        <input type="radio" name="spaces" value="Tourist Destination" /><span class="chk_lbl">Tourist Destination</span>
                        <input type="radio" name="spaces" value="Neighborhood" /><span class="chk_lbl">Neighborhood</span>
                        <input type="radio" name="spaces" value="Home" /><span class="chk_lbl">Home</span>
                        <input type="radio" name="spaces" value="Cemetery" /><span class="chk_lbl">Cemetery</span>
                        <input type="radio" name="spaces" value="Hospital" /><span class="chk_lbl">Hospital</span>
                        <input type="radio" name="spaces" value="Museum" /><span class="chk_lbl">Museum</span>
                        <input type="radio" name="spaces" value="Park" /><span class="chk_lbl">Park</span>
                        <input type="radio" name="spaces" value="Street" /><span class="chk_lbl">Street</span>
                        <input type="radio" name="spaces" value="Zoo" /><span class="chk_lbl">Zoo</span>
                        <input type="radio" name="spaces" value="Gym" /><span class="chk_lbl">Gym</span>
                        <input type="radio" name="spaces" value="Other Building" /><span class="chk_lbl">Other Building</span>
                        <div class="reactiveOther hidden" for="building">
                            <label>Please tell us what you mean by other:</label>
                            <textarea type="text"> </textarea>
                        </div>
                        <input type="button" onclick="LR.ui.assignPrimarySpecification(event, 'spaces')" value="Choose" />
                        <div for="spaces" class="chosenPrimarySpecification">None Chosen</div>
                    </div>
                    <div class="secondarySpecification hidden" for="spaces">
                        <header>Check all other types for this space.</header>
                        <label>General Specification</label>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Accommodation" /><span class="chk_lbl">Accommodation</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="AdministrativeArea" /><span class="chk_lbl">Administrative Area</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Civic Structure" /><span class="chk_lbl">Civic Structure</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Landform" /><span class="chk_lbl">Landform</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Other Building" /><span class="chk_lbl">Other Building</span> same properties as Place and Intangible in schema, but this is like LR::Imagined
                        because no schema exists
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Imagined" /><span class="chk_lbl">Imagined</span>
                        <br>
                        <label>More Specific</label>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Landmarks or Historical Buildings" /><span class="chk_lbl">Landmarks or Historical Buildings</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Local Business" /><span class="chk_lbl">Local Business</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Residence" /><span class="chk_lbl">Residence</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="School" /><span class="chk_lbl">School</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Tourist Destination" /><span class="chk_lbl">Tourist Destination</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Neighborhood" /><span class="chk_lbl">Neighborhood</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Home" /><span class="chk_lbl">Home</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Cemetery" /><span class="chk_lbl">Cemetery</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Hospital" /><span class="chk_lbl">Hospital</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Museum" /><span class="chk_lbl">Museum</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Park" /><span class="chk_lbl">Park</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Street" /><span class="chk_lbl">Street</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Zoo" /><span class="chk_lbl">Zoo</span>
                        <input type="checkbox" onchange="LR.ui.reactiveSecondaryType(event, 'spaces')" value="Gym" /><span class="chk_lbl">Gym</span>
                        <input deer-key-x="additionalType" type="checkbox" onchange="LR.ui.reactiveOther(event, 'spaces')" value="Other Building" /><span class="chk_lbl">Other Building</span>
                        <div class="reactiveOther hidden" for="spaces">
                            <label>Please tell us what you mean by other:</label>
                            <textarea type="text"> </textarea>
                        </div>
                    </div>
                    <header>History of this Space:</header>
                    <label>Former Location(s):</label>
                    <textarea type="text" deer-key-x="LR::FormerLocations"> </textarea>
                    <label>Former Use(s):</label>
                    <textarea type="text" deer-key-x="LR::FormerUses"> </textarea>
                    <label>Material(s):</label>
                    <textarea type="text" deer-key-x="material"> </textarea>
                    <label>Further Description:</label>
                    <textarea type="text" deer-key-x="description"> </textarea>
                    <div class="dataWrap">
                        <label>Typical Use: </label>
                        <select deer-key-x="typical_use" value="">
                            <option value="Religious">Religious</option>
                            <option value="Commercial">Commercial</option>
                            <option value="Educational">Educational</option>
                            <option value="Civic">Civic</option>
                            <option value="Other Public">Other Public</option>
                        </select>
                    </div>
                    <div> Upload Media </div>
                    <label>Field Notes:</label>
                    <textarea type="text" deer-key-x="LR::FieldNotes"> </textarea>
                    <label>Tags separated by ',':</label>
                    <textarea type="text" deer-key-x="LR::Tags"> </textarea>

                </form>
            </div>
        </div>

        <div class="card">
            <div class="card_body">
                <input type="button" value="View Existing events" class="btn btn-primary" onclick="LR.tricks.populateExistingvents()" />
                <header>Existing events</header>
                <!-- <deer-view  deer-type="List" deer-id=""> -->
                <ul id="events">
                    <li>Gathering event Data..TODO</li>
                </ul>
                <!-- </deer-view> -->
            </div>
        </div>
    </div>
    <lr-footer></lr-footer>

    <script src="./js/deerInitializer.js" type="module"></script>
    <script src="./js/app.js" type="text/javascript"></script>
    <script src="./js/components.js" type="text/javascript"></script>

</body>

</html>